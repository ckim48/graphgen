{% set APP_NAME = "Equation Grapher" %}
<!doctype html>
<html lang="en" data-bs-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ APP_NAME }} · Learn by Plotting</title>

    <!-- Favicons (optional) -->
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='apple-touch-icon.png') }}">

    <!-- Bootstrap / Fonts -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

    <!-- AOS CSS (required for animations to render) -->
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">

    <style>
      :root{--bg:#f7f9ff;--bg2:#fff;--card:#fff;--card-border:#e9eef7;--text:#0f172a;--muted:#667085;--ring:#5184ff;--g1:#5ea0ff;--g2:#a37bff;--g3:#ff86b4;--divider:#eef2f7}
      *{box-sizing:border-box} html,body{height:100%}
      body{margin:0;font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans";color:var(--text);background:radial-gradient(1200px 700px at 10% -10%, #e9f1ff 0%, transparent 50%),radial-gradient(1000px 600px at 100% 0%, #fde7f2 0%, transparent 55%),linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);background-repeat:no-repeat;background-attachment:fixed;min-height:100dvh}
      .appbar{backdrop-filter:saturate(140%) blur(6px);background:linear-gradient(180deg,rgba(255,255,255,.88),rgba(255,255,255,.78));border-bottom:1px solid var(--card-border)}
      .brand{font-weight:800;letter-spacing:.2px;background:linear-gradient(135deg,var(--g1),var(--g2) 50%,var(--g3));-webkit-background-clip:text;background-clip:text;color:transparent}
      .btn-accent{background:linear-gradient(135deg,var(--g1),var(--g2) 50%,var(--g3));color:#fff;border:0;font-weight:700;letter-spacing:.2px;border-radius:14px;padding:10px 16px;box-shadow:0 12px 28px rgba(81,132,255,.25)}
      .btn-accent:hover{filter:brightness(1.05)}
      .btn-outline{background:#fff;color:var(--text);border:1px solid var(--card-border);border-radius:12px;padding:10px 16px;font-weight:600}
      .hero{position:relative;overflow:hidden;height: 90vh;}
      .hero .glow{position:absolute;inset:-20% -10% auto -10%;height:60vh;background:radial-gradient(800px 380px at 30% 0%, rgba(94,160,255,.25), transparent 60%),radial-gradient(800px 380px at 70% 0%, rgba(255,134,180,.22), transparent 60%);pointer-events:none}
      .card{background:var(--card);border:1px solid var(--card-border)}
      .shadow-soft{box-shadow:0 18px 40px rgba(17,24,39,.08)}
      .section{padding:70px 0}
      .muted{color:var(--muted)}
      .check{width:22px;height:22px;border-radius:6px;display:inline-flex;align-items:center;justify-content:center;background:#e7efff;border:1px solid #d9e6ff}
      .feat{border-left:3px solid #e9eef7}
      footer{border-top:1px solid var(--divider)}
      .code{font-family: ui-monospace,SFMono-Regular,Menlo,monospace;background:#0b1020;color:#d9e1ff;border-radius:12px;padding:18px}
      .badge-soft{color:#3b4a6b;background:#f2f6ff;border:1px solid var(--card-border);font-weight:700}

      /* --- Features --- */
      .features-grid .feature-card{
        border:1px solid var(--card-border);
        border-radius:20px;
        background:linear-gradient(180deg,#fff, #fcfdff);
        transition:transform .25s ease, box-shadow .25s ease, border-color .25s ease;
      }
      .features-grid .feature-card:hover{
        transform:translateY(-2px);
        box-shadow:0 18px 40px rgba(17,24,39,.10);
        border-color:#dfe7fb;
      }
      .feature-topbar{
        height:6px;border-radius:8px 8px 0 0;
        background:linear-gradient(90deg,var(--g1),var(--g2) 50%,var(--g3));
      }
      .feature-icon{
        width:40px;height:40px;border-radius:12px;
        display:inline-flex;align-items:center;justify-content:center;
        background:linear-gradient(180deg,#f3f7ff,#eef3ff);
        border:1px solid #e3ebff;
      }
      .feature-title{font-weight:700;}
      .feature-kicker{
        font-size:.78rem;font-weight:700;
        background:#f6f9ff;border:1px solid var(--card-border);
        padding:.35rem .6rem;border-radius:999px;color:#3b4a6b;
      }
      .feature-bullets{color:var(--muted); font-size:.95rem}
      /* Contact email pill */
      .email-link {
        display:inline-flex; align-items:center; gap:.5rem;
        padding:.65rem 1rem; border-radius:999px; font-weight:700;
        text-decoration:none; position:relative; isolation:isolate;
        color:#0f172a; background:#ffffff;
        border:1px solid #e2e8f0; box-shadow:0 6px 18px rgba(17,24,39,0.06);
      }
      .email-link::before{
        content:""; position:absolute; inset:-2px; z-index:-1; border-radius:inherit;
        background:linear-gradient(135deg,var(--g1),var(--g2) 50%,var(--g3));
        -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
        -webkit-mask-composite: xor; mask-composite: exclude;
        padding:2px;
      }
      .email-link:hover{ box-shadow:0 10px 28px rgba(17,24,39,0.10); transform:translateY(-1px); }
      .email-icon { width:18px; height:18px; display:inline-block; }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg appbar sticky-top">
      <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="{{ url_for('main') }}">
          <span class="brand">{{ APP_NAME }}</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav" aria-controls="nav" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div id="nav" class="collapse navbar-collapse">
          <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-2">
            <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
            <li class="nav-item"><a class="nav-link" href="#features">Features</a></li>
            {% if user %}
              <li class="nav-item"><a class="btn btn-outline ms-lg-2" href="{{ url_for('main') }}">Open App</a></li>
            {% else %}
              <li class="nav-item"><a class="btn btn-outline" href="{{ url_for('login') }}">Log in</a></li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>

    <!-- HERO -->
    <header class="hero section pb-0" data-aos="fade-in">
      <div class="glow"></div>
      <div class="container position-relative">
        <div class="row align-items-center g-4 g-lg-5">
          <!-- Left: copy -->
          <div class="col-lg-6" data-aos="fade-right" data-aos-duration="900">
            <h1 class="display-5 fw-bold mt-3" style="line-height:1.1">
              Plot, explore, and learn with <span class="brand">{{ APP_NAME }}</span>
            </h1>
            <p class="mt-3 fs-5 muted" data-aos="fade-up" data-aos-delay="100">
              Visualize mathematical functions with smooth animations and gradients.
            </p>

            <div class="d-flex flex-wrap gap-2 mt-3" data-aos="fade-up" data-aos-delay="200">
              <a href="{{ url_for('main') }}" class="btn btn-accent btn-lg" aria-label="Get started with {{ APP_NAME }}">
                Get Started
              </a>
              <a href="#about" class="btn btn-outline btn-lg" aria-label="Learn more about {{ APP_NAME }}">
                Learn More
              </a>
            </div>

            <div class="d-flex align-items-center gap-2 mt-4 muted small" data-aos="fade-up" data-aos-delay="300">
              <span class="check">✓</span><span>No sign-up required</span>
              <span class="check ms-3">✓</span><span>Works on any modern browser</span>
            </div>
          </div>

          <!-- Right: chart -->
          <div class="col-lg-6" data-aos-duration="900">
            <div class="card shadow-soft rounded-4 overflow-hidden">
              <div class="p-2 bg-white">
                <canvas id="heroChart" style="width:100%;height:360px"></canvas>
              </div>
            </div>
            <div class="text-center muted mt-2 small" data-aos="fade-up" data-aos-delay="150">
              Gradient plot: y = sin(x) · e^{-0.03x²}
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- ABOUT -->
    <section id="about" class="section" style="border-top:1px solid var(--divider); border-bottom:1px solid var(--divider);" data-aos="fade-up">
      <div class="container">
        <!-- Row 1 -->
        <div class="row align-items-center g-4 g-lg-5 mb-5" data-aos="fade-up" data-aos-delay="100">
          <div class="col-lg-6" data-aos="fade-right">
            <span class="badge badge-soft rounded-pill px-3 py-2">About the app</span>
            <h2 class="fw-bold mt-2">Built for clarity and speed</h2>
            <p class="muted">{{ APP_NAME }} focuses on the essentials: safe parsing, crisp plots, and a friction-free UI so you can explore math without distractions.</p>
            <ul class="muted mb-0">
              <li>Sympy + NumPy under the hood for accurate sampling</li>
              <li>Chart.js rendering with grid, axes, and discontinuity handling</li>
              <li>Works great on laptops, tablets, and classroom projectors</li>
            </ul>
          </div>
          <div class="col-lg-6" data-aos="fade-left" data-aos-delay="150">
            <div class="card shadow-soft rounded-4 overflow-hidden">
              <div class="ratio ratio-16x9 bg-white">
                <img src="{{ url_for('static', filename='a1.jpg') }}" alt="About illustration 1" class="w-100 h-100 object-fit-contain p-2">
              </div>
            </div>
          </div>
        </div>
        <!-- Row 2 -->
        <div class="row align-items-center g-4 g-lg-5" data-aos="fade-up" data-aos-delay="150">
          <div class="col-lg-6 order-lg-1 order-2" data-aos="fade-right" data-aos-delay="200">
            <div class="card shadow-soft rounded-4 overflow-hidden">
              <div class="ratio ratio-16x9 bg-white">
                <img src="{{ url_for('static', filename='a2.jpg') }}" alt="About illustration 2" class="w-100 h-100 object-fit-contain p-2">
              </div>
            </div>
          </div>
          <div class="col-lg-6 order-lg-2 order-1" data-aos="fade-left" data-aos-delay="250">
            <span class="badge badge-soft rounded-pill px-3 py-2">Why it’s different</span>
            <h2 class="fw-bold mt-2">Explore with smart suggestions</h2>
            <p class="muted">After each plot, the app proposes three follow-ups (e.g., frequency, shift, or inverse) so learners can compare shapes quickly.</p>
            <ul class="muted mb-0">
              <li>One-click presets for quick demos</li>
              <li>Speech input support for equation and ranges</li>
              <li>Minimal chrome—your graph takes center stage</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- FEATURES -->
    <section id="features" class="section" style="border-top:1px solid var(--divider);" data-aos="fade-up">
      <div class="container">
        <div class="text-center mb-4" data-aos="fade-up">
          <h2 class="fw-bold mt-2">Everything you need to plot—and learn—faster</h2>
          <p class="muted">Clean interactions, smart guidance, and reliable math under the hood.</p>
        </div>

        <div class="row g-4 g-lg-5 features-grid">
          <!-- Card 1 -->
          <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="50">
            <div class="feature-card h-100">
              <div class="feature-topbar"></div>
              <div class="p-4">
                <div class="d-flex align-items-center gap-2 mb-3">
                  <span class="feature-icon">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
                      <path d="M4 19V5M10 19V9M16 19V12M22 19H2" stroke="#5a6bff" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </span>
                  <div class="feature-title">Fast, clean plotting</div>
                </div>
                <p class="muted mb-3">Accurate sampling with Sympy + NumPy, rendered crisply with Chart.js.</p>
                <ul class="feature-bullets mb-0 ps-3">
                  <li>Implicit multiplication & powers (<code>^</code>)</li>
                  <li>Graceful gaps at discontinuities</li>
                  <li>Adaptive axes & grid</li>
                </ul>
              </div>
            </div>
          </div>
          <!-- Card 2 -->
          <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="100">
            <div class="feature-card h-100">
              <div class="feature-topbar"></div>
              <div class="p-4">
                <div class="d-flex align-items-center gap-2 mb-3">
                  <span class="feature-icon">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
                      <path d="M12 3a9 9 0 100 18 9 9 0 000-18Z" stroke="#7f5cff" stroke-width="1.7"/>
                      <path d="M15.5 8.5l-2.1 5.1L8.5 15.5l2.1-5.1L15.5 8.5Z" stroke="#7f5cff" stroke-width="1.7" stroke-linejoin="round"/>
                    </svg>
                  </span>
                  <div class="feature-title">Guided exploration</div>
                </div>
                <p class="muted mb-3">After each plot, get three focused suggestions to try next.</p>
                <ul class="feature-bullets mb-0 ps-3">
                  <li>Contrast via shift / scale / inverse</li>
                  <li>One-click chips—no retyping</li>
                  <li>Keeps your current range</li>
                </ul>
              </div>
            </div>
          </div>
          <!-- Card 3 (Arduino) -->
          <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="150">
            <div class="feature-card h-100">
              <div class="feature-topbar"></div>
              <div class="p-4">
                <div class="d-flex align-items-center gap-2 mb-3">
                  <span class="feature-icon">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                      <g fill="#7f5cff">
                        <circle cx="6" cy="6" r="1.2"/><circle cx="12" cy="6" r="1.2"/><circle cx="18" cy="6" r="1.2"/>
                        <circle cx="6" cy="12" r="1.2"/><circle cx="12" cy="12" r="1.2"/><circle cx="18" cy="12" r="1.2"/>
                        <circle cx="6" cy="18" r="1.2"/><circle cx="12" cy="18" r="1.2"/><circle cx="18" cy="18" r="1.2"/>
                      </g>
                      <rect x="3" y="3" width="18" height="18" rx="3" stroke="#7f5cff" stroke-width="1.4"/>
                    </svg>
                  </span>
                  <div class="feature-title">Tactile output (20×20 Arduino grid)</div>
                </div>
                <p class="muted mb-3">
                  Optional hardware add-on that translates plotted curves into a 20×20 pin matrix for
                  non-visual reading by blind or low-vision learners.
                </p>
                <ul class="feature-bullets mb-0 ps-3">
                  <li>Consumes raster path from <code>/path</code> endpoint</li>
                  <li>Maps x/y to 20×20 cells with gap handling</li>
                  <li>Simple serial protocol for Arduino drivers</li>
                </ul>
              </div>
            </div>
          </div>
          <!-- Card 4 -->
          <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="200">
            <div class="feature-card h-100">
              <div class="feature-topbar"></div>
              <div class="p-4">
                <div class="d-flex align-items-center gap-2 mb-3">
                  <span class="feature-icon">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
                      <path d="M4 12c0-4.418 3.582-8 8-8" stroke="#5a6bff" stroke-width="1.7" stroke-linecap="round"/>
                      <path d="M7 12h10" stroke="#5a6bff" stroke-width="1.7" stroke-linecap="round"/>
                      <path d="M12 17c2.761 0 5-2.239 5-5" stroke="#5a6bff" stroke-width="1.7" stroke-linecap="round"/>
                    </svg>
                  </span>
                  <div class="feature-title">Rich function set</div>
                </div>
                <p class="muted mb-3">Trig, polynomials, exponentials, logs, roots, and composites in <code>x</code>.</p>
                <ul class="feature-bullets mb-0 ps-3">
                  <li>Constants: <code>pi</code>, <code>E</code>, <code>oo</code></li>
                  <li>Domain-aware plotting</li>
                  <li>Stable numeric handling</li>
                </ul>
              </div>
            </div>
          </div>
          <!-- Card 5 -->
          <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="250">
            <div class="feature-card h-100">
              <div class="feature-topbar"></div>
              <div class="p-4">
                <div class="d-flex align-items-center gap-2 mb-3">
                  <span class="feature-icon">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
                      <rect x="7" y="7" width="10" height="10" rx="2" stroke="#7f5cff" stroke-width="1.7"/>
                      <path d="M12 1v3M12 20v3M1 12h3M20 12h3M4.5 4.5l2.1 2.1M17.4 17.4l2.1 2.1M19.5 4.5l-2.1 2.1M6.6 17.4l-2.1 2.1" stroke="#7f5cff" stroke-width="1.4" stroke-linecap="round"/>
                    </svg>
                  </span>
                  <div class="feature-title">Snappy & lightweight</div>
                </div>
                <p class="muted mb-3">Minimal overhead, instant feedback, and a layout that feels effortless.</p>
                <ul class="feature-bullets mb-0 ps-3">
                  <li>Keyboard & speech input</li>
                  <li>Mobile-friendly controls</li>
                  <li>Projector-ready UI</li>
                </ul>
              </div>
            </div>
          </div>
          <!-- Card 6 -->
          <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="300">
            <div class="feature-card h-100">
              <div class="feature-topbar"></div>
              <div class="p-4">
                <div class="d-flex align-items-center gap-2 mb-3">
                  <span class="feature-icon">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
                      <rect x="4" y="10" width="16" height="10" rx="2" stroke="#ff84b0" stroke-width="1.7"/>
                      <path d="M8 10V8a4 4 0 118 0v2" stroke="#ff84b0" stroke-width="1.7" stroke-linecap="round"/>
                    </svg>
                  </span>
                  <div class="feature-title">Simple auth (optional)</div>
                </div>
                <p class="muted mb-3">Use accounts only if you want saved prefs—plotting works without login.</p>
                <ul class="feature-bullets mb-0 ps-3">
                  <li>Werkzeug-hashed passwords</li>
                  <li>SQLite by default</li>
                  <li>Easy provider swap-out</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="text-center mt-4" data-aos="fade-up" data-aos-delay="150">
          <a href="{{ url_for('main') }}" class="btn btn-accent btn-lg">Launch the App</a>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="section" style="border-top:1px solid var(--divider);background:#fafbff;" data-aos="fade-up">
      <div class="container text-center">
        <h2 class="fw-bold">Get in Touch</h2>
        <p class="muted mb-4">Questions, feedback, or collaboration ideas? We’d love to hear from you.</p>
        <a href="mailto:contact@equationgrapher.app" class="email-link" data-aos="zoom-in" data-aos-delay="100">
          <span class="email-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none">
              <path d="M3 7.5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2V16a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7.5Z" stroke="currentColor" stroke-width="1.6" />
              <path d="M5 8l7 5 7-5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" />
            </svg>
          </span>
          contact@equationgrapher.app
        </a>
        <div class="small muted mt-2" data-aos="fade-up" data-aos-delay="150">We typically respond within one business day.</div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="py-4 bg-white" style="border-top:1px solid var(--divider);" data-aos="fade-in">
      <div class="container d-flex flex-column flex-lg-row gap-2 align-items-center justify-content-between">
        <div class="small muted">© <span id="year"></span> {{ APP_NAME }}. All rights reserved.</div>
      </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <!-- AOS JS -->
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.min.js"></script>
    <script>
      AOS.init({
        once: true,
        offset: 60,
        duration: 600,
        easing: 'ease-out-cubic'
      });
    </script>
    <script>
      // Footer year
      (function(){ try { document.getElementById('year').textContent = new Date().getFullYear(); } catch(e) {} })();

      // Hero chart
      (function(){
        const el = document.getElementById('heroChart');
        if (!el || !window.Chart) return;
        const ctx = el.getContext('2d');
        const gradient = ctx.createLinearGradient(0, 0, 0, 360);
        gradient.addColorStop(0, 'rgba(94,160,255,0.9)');
        gradient.addColorStop(0.5, 'rgba(163,123,255,0.8)');
        gradient.addColorStop(1, 'rgba(255,134,180,0.7)');

        const xs = [], ys = [];
        const N = 400, xmin = -10, xmax = 10;
        for (let i = 0; i < N; i++) {
          const t = i/(N-1);
          const x = xmin + t*(xmax - xmin);
          const y = Math.sin(x) * Math.exp(-0.03*x*x);
          xs.push(x); ys.push(y);
        }

        new Chart(ctx, {
          type: 'line',
          data: {
            labels: xs,
            datasets: [{
              label: 'y = sin(x)e^{-0.03x²}',
              data: ys,
              borderColor: gradient,
              borderWidth: 3,
              tension: 0.3,
              fill: false,
              pointRadius: 0,
            }]
          },
          options: {
            animation: { duration: 1500, easing: 'easeInOutQuart' },
            responsive: true, maintainAspectRatio: false,
            plugins: {
              legend: { display: false, position: 'top',
                labels: { color: '#0f172a', font: { size: 13, weight: '600' } } },
              tooltip: { enabled: true }
            },
            scales: {
              x: {
                type: 'linear',
                grid: { color: '#eef2f7', lineWidth: 1 },
                ticks: { color: '#667085', font: { size: 11 } },
                title: { display: true, text: 'x', color: '#0f172a', font: { weight: 'bold' } }
              },
              y: {
                grid: { color: '#eef2f7', lineWidth: 1 },
                ticks: { color: '#667085', font: { size: 11 } },
                title: { display: true, text: 'y', color: '#0f172a', font: { weight: 'bold' } }
              }
            }
          }
        });
      })();
    </script>
  </body>
</html>
